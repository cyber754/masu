<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>マス目変換チャレンジ</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #f5f5f5;
    }

    h2 {
      font-size: 24px;
      margin: 40px 0 10px;
    }

    .section-title {
      font-size: 32px;
      font-weight: bold;
      margin-top: 60px;
    }

    .boards-container {
      display: grid;
      grid-template-columns: repeat(3, auto);
      gap: 40px;
      justify-content: center;
      margin-top: 30px;
    }

    .board-row {
      display: flex;
      align-items: center;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(8, 20px);
      grid-template-rows: repeat(8, 20px);
      gap: 2px;
      margin-right: 10px;
    }

    .cell {
      width: 20px;
      height: 20px;
      background-color: white;
      border: 1px solid #ccc;
    }

    .cell.black {
      background-color: black;
    }

    .binary-display {
      font-family: monospace;
      font-size: 18px;
      white-space: pre;
      text-align: left;
    }

    .spacer {
      height: 120px;
    }

    .character {
      width: 120px;
      margin: 0 auto;
      display: block;
    }

    .extra-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 40px;
    }

    .extra-board {
      display: grid;
      grid-template-columns: repeat(16, 20px);
      grid-template-rows: repeat(16, 20px);
      gap: 2px;
    }

    .cell.extra {
      width: 20px;
      height: 20px;
      background-color: white;
      border: 1px solid #aaa;
    }

    .cell.extra.black {
      background-color: black;
    }
  </style>
</head>
<body>

  <h2>暗号X</h2>
  <div class="boards-container">
    <!-- row 1 -->
    <div class="board-row"><div class="board" data-board-index="0"></div><div class="binary-display" id="binary-0"></div></div>
    <div class="board-row"><div class="board" data-board-index="1"></div><div class="binary-display" id="binary-1"></div></div>
    <div class="board-row"><div class="board" data-board-index="2"></div><div class="binary-display" id="binary-2"></div></div>
  </div>

  <h2>暗号Y</h2>
  <div class="boards-container">
    <!-- row 2 -->
    <div class="board-row"><div class="board" data-board-index="3"></div><div class="binary-display" id="binary-3"></div></div>
    <div class="board-row"><div class="board" data-board-index="4"></div><div class="binary-display" id="binary-4"></div></div>
    <div class="board-row"><div class="board" data-board-index="5"></div><div class="binary-display" id="binary-5"></div></div>
  </div>

  <h2>暗号Z</h2>
  <div class="boards-container">
    <!-- row 3 -->
    <div class="board-row"><div class="board" data-board-index="6"></div><div class="binary-display" id="binary-6"></div></div>
    <div class="board-row"><div class="board" data-board-index="7"></div><div class="binary-display" id="binary-7"></div></div>
    <div class="board-row"><div class="board" data-board-index="8"></div><div class="binary-display" id="binary-8"></div></div>
  </div>

  <!-- キャラ画像と余白 -->
  <div class="spacer"></div>
  <img src="dot_character_transparent.png" alt="キャラ" class="character">
  <div class="spacer"></div>

  <!-- エキストラ -->
  <div class="section-title">えきすとら</div>
  <div class="extra-container">
    <div class="extra-board" id="extra-1"></div>
    <div class="extra-board" id="extra-2"></div>
  </div>

  <script>
    // 8×8 マス盤面生成とビット表示
    function createBoard(boardIndex) {
      const board = document.querySelector(`.board[data-board-index="${boardIndex}"]`);
      const binaryDisplay = document.getElementById(`binary-${boardIndex}`);

      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          cell.dataset.row = row;
          cell.dataset.col = col;

          cell.addEventListener('mousedown', () => {
            cell.classList.toggle('black');
            updateBinary();
          });

          board.appendChild(cell);
        }
      }

      function updateBinary() {
        let output = '';
        for (let row = 0; row < 8; row++) {
          let rowBits = '';
          for (let col = 0; col < 8; col++) {
            const idx = row * 8 + col;
            const cell = board.children[idx];
            rowBits += cell.classList.contains('black') ? '1' : '0';
          }
          output += rowBits + '\n';
        }
        binaryDisplay.textContent = output;
      }
    }

    for (let i = 0; i < 9; i++) {
      createBoard(i);
    }

    // エキストラ（16×16）
    function createExtraBoard(id) {
      const container = document.getElementById(id);
      for (let i = 0; i < 256; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell', 'extra');
        cell.addEventListener('mousedown', () => {
          cell.classList.toggle('black');
        });
        container.appendChild(cell);
      }
    }

    createExtraBoard("extra-1");
    createExtraBoard("extra-2");
  </script>
</body>
</html>
